<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parts Downloader Ø¯</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, rgb(0, 18, 10) 0%, rgb(0, 8, 9) 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      color: #f0f0f0;
    }
    .container { max-width: 1000px; width: 100%; }
    .main-header { text-align: center; margin-bottom: 20px; }
    .parts-grid { display: grid; grid-template-columns: repeat(auto-fill,minmax(250px,1fr)); gap: 15px; }
    .part-card { background: rgba(255,255,255,0.08); padding: 15px; border-radius: 12px; }
    .download-btn { background: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; }
    .reset-btn { background: #ff5252; color: #fff; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
    .admin-btn { background: #ffc107; color: black; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
    .actions { display: flex; gap: 10px; justify-content: center; margin: 20px 0; }
    #passwordPrompt,#adminPanel { display: none; margin: 15px auto; background: rgba(255,255,255,0.08); padding: 15px; border-radius: 12px; }
    input { padding: 6px; margin: 5px 0; border-radius: 6px; border: 1px solid #ccc; width: 90%; }
    .add-btn { background: #28a745; color:#fff; padding: 8px 14px; border:none; border-radius:6px; cursor: pointer; }
    .edit-btn { background: #ffc107; padding: 5px 10px; border:none; border-radius:6px; cursor: pointer; }
    .delete-btn { background: #dc3545; color:#fff; padding: 5px 10px; border:none; border-radius:6px; cursor: pointer; }
  </style>
</head>
<body>
  <div class="container">
    <header class="main-header">
      <h1>ğŸ—‚ï¸ Ù…Ø±ÙƒØ² ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø§Ø±ØªØ§Øª</h1>
    </header>

    <main>
      <div class="parts-grid" id="partsContainer"></div>

      <div class="actions">
        <button id="resetAllBtn" class="reset-btn">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ÙƒÙ„</button>
        <button class="admin-btn" onclick="showLogin()">ğŸ”‘ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø£Ø¯Ù…Ù†</button>
      </div>

      <div id="passwordPrompt">
        <input type="password" id="adminPassword" placeholder="Ø§Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
        <button onclick="checkPassword()">Ø¯Ø®ÙˆÙ„</button>
      </div>

      <div id="adminPanel">
        <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†</h2>
        <input type="text" id="partName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø±Øª">
        <input type="text" id="partSize" placeholder="Ø§Ù„Ø­Ø¬Ù… (Ù…Ø«Ø§Ù„: 9.77 GB)">
        <input type="text" id="partURL" placeholder="Ø§Ù„Ø±Ø§Ø¨Ø·">
        <button class="add-btn" onclick="addPart()">â• Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ø±Øª</button>
        <div id="adminPartsList"></div>
      </div>
    </main>
  </div>

  <script>
    const BIN_URL = "https://json.extendsclass.com/bin/374fbe8426c4";
    const SECURITY_KEY = ""; // Ø¥Ø°Ø§ Ø¶ÙØª Security Key Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø­Ø·Ù‡ Ù‡Ù†Ø§
    const encodedPassword = "YWhxaWFid28="; // ahqiabwo

    let partsData = [];

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† JSON Bin
    async function loadParts() {
      try {
        const res = await fetch(BIN_URL);
        partsData = await res.json();
        renderParts();
      } catch (err) {
        console.error("Ø®Ø·Ø£ Ø¨Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:", err);
      }
    }

    // Ø­ÙØ¸ Ø§Ù„ØªØºÙŠÙŠØ±Ø§Øª ÙÙŠ JSON Bin
    async function saveParts() {
      try {
        await fetch(BIN_URL, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "Security-key": SECURITY_KEY
          },
          body: JSON.stringify(partsData)
        });
      } catch (err) {
        console.error("Ø®Ø·Ø£ Ø¨Ø§Ù„Ø­ÙØ¸:", err);
      }
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø§Ø±ØªØ§Øª
    function renderParts() {
      const container = document.getElementById("partsContainer");
      container.innerHTML = "";
      partsData.forEach((part, i) => {
        const card = document.createElement("div");
        card.className = "part-card";
        card.innerHTML = `
          <h3>${part.name}</h3>
          <p>Ø§Ù„Ø­Ø¬Ù…: ${part.size}</p>
          <button class="download-btn" onclick="window.open('${part.url}','_blank')">â¬‡ï¸ ØªØ­Ù…ÙŠÙ„</button>
        `;
        container.appendChild(card);
      });
      renderAdminParts();
    }

    function showLogin() {
      document.getElementById("passwordPrompt").style.display = "block";
    }

    function checkPassword() {
      const input = document.getElementById("adminPassword").value;
      if (input === atob(encodedPassword)) {
        document.getElementById("adminPanel").style.display = "block";
        document.getElementById("passwordPrompt").style.display = "none";
      } else alert("âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø®Ø§Ø·Ø¦Ø©");
    }

    async function addPart() {
      const name = document.getElementById("partName").value;
      const size = document.getElementById("partSize").value;
      const url = document.getElementById("partURL").value;
      if (!name || !size || !url) return alert("âš ï¸ Ø£Ø¯Ø®Ù„ ÙƒÙ„ Ø§Ù„Ø­Ù‚ÙˆÙ„");
      partsData.push({ id: "part" + Date.now(), name, size, url });
      await saveParts();
      renderParts();
    }

    function renderAdminParts() {
      const adminList = document.getElementById("adminPartsList");
      adminList.innerHTML = "";
      partsData.forEach((p,i)=>{
        const div = document.createElement("div");
        div.innerHTML = `<b>${p.name}</b> - ${p.size}
          <button class="edit-btn" onclick="editPart(${i})">ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="delete-btn" onclick="deletePart(${i})">Ø­Ø°Ù</button>`;
        adminList.appendChild(div);
      });
    }

    async function editPart(index) {
      const p = partsData[index];
      const newName = prompt("Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ø±Øª:", p.name) || p.name;
      const newSize = prompt("Ø§Ù„Ø­Ø¬Ù…:", p.size) || p.size;
      const newUrl = prompt("Ø§Ù„Ø±Ø§Ø¨Ø·:", p.url) || p.url;
      partsData[index] = {...p, name:newName, size:newSize, url:newUrl};
      await saveParts();
      renderParts();
    }

    async function deletePart(index) {
      if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø§Ø±ØªØŸ")) {
        partsData.splice(index,1);
        await saveParts();
        renderParts();
      }
    }

    document.getElementById("resetAllBtn").onclick = async () => {
      if (confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø§Ø±ØªØ§ØªØŸ")) {
        partsData = [];
        await saveParts();
        renderParts();
      }
    };

    loadParts();
  </script>
</body>
</html>
